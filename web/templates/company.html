{% extends "layout.html" %}

{% block title %}{{ company[2] }} - Analysis{% endblock %}

{% block content %}

<!-- Breadcrumb -->
<nav aria-label="breadcrumb" class="mb-4">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="/">Home</a></li>
    <li class="breadcrumb-item"><a href="/companies">Companies</a></li>
    <li class="breadcrumb-item active">{{ company[2] }}</li>
  </ol>
</nav>

<!-- Company Header -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card-box">
      <div class="row align-items-center">
        <div class="col-md-8">
          <h1 class="section-heading mb-2">{{ company[2] }}</h1>
          <p class="text-muted mb-1">Company ID: {{ company[0] }}</p>
          {% if company[3] %}
          <p class="text-muted mb-0">{{ company[3] }}</p>
          {% endif %}
        </div>
        <div class="col-md-4 text-md-end">
          {% if company[1] %}
          <img src="{{ company[1] }}" alt="{{ company[2] }} logo" class="img-fluid" style="max-height: 60px;">
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
{% if show_insights %}
<div class="card-box">
  <h2 class="section-heading">Analysis</h2>
  <p class="text-muted"># Analysis Generated Using ML</p>
  <div class="row">
    <div class="col-md-4">
      <div class="border rounded p-3 mb-3">
        <strong class="text-primary">Compounded Sales Growth</strong><br>
        3 Years: {{ analysis[2] }}<br>
        5 Years: —<br>
        10 Years: —
      </div>
    </div>
    <div class="col-md-4">
      <div class="border rounded p-3 mb-3">
        <strong class="text-primary">Compounded Profit Growth</strong><br>
        3 Years: {{ analysis[3] }}<br>
        5 Years: —<br>
        10 Years: —
      </div>
    </div>
    <div class="col-md-4">
      <div class="border rounded p-3 mb-3">
        <strong class="text-primary">Return on Equity</strong><br>
        3 Years: {{ analysis[5] }}<br>
        5 Years: —<br>
        10 Years: —
      </div>
    </div>
  </div>
</div>

<div class="card-box">
  <h3 class="section-heading">Pros and Cons</h3>
  <p class="text-muted"><span class="dot"></span> Generated Using Machine Learning</p>
  <div class="row">
    <div class="col-md-6">
      <div class="pros-box">
        {% for pro in pros %}
          <p>{{ pro }}</p>
        {% endfor %}
      </div>
    </div>
    <div class="col-md-6">
      <div class="cons-box">
        {% for con in cons %}
          <p>{{ con }}</p>
        {% endfor %}
      </div>
    </div>
  </div>
</div>
{% else %}
<div class="alert alert-warning mt-4">
  <h4 class="alert-heading">ML Insights Not Yet Available</h4>
  <p>ML-generated insights will be displayed here after analyzing at least 70 companies.<br>
  Currently analyzed: {{ processed_count }} companies.</p>
</div>
{% endif %}

<!-- Navigation -->
<div class="row mt-4">
  <div class="col-12">
    <div class="text-center">
      <a href="/companies" class="btn btn-outline-secondary me-2">← Back to Companies</a>
      <a href="/" class="btn btn-outline-primary">← Back to Home</a>
    </div>
  </div>
</div>

{% endblock %}
